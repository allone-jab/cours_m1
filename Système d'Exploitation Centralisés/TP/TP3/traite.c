#include <stdio.h>
#include <fcntl.h>

main(int argc, char **argv)
{
  int compter=0;
  int desc;
  int nb;
  char lect[5];
  
  fprintf(stderr,"traite %s par %d\n",argv[1],getpid());
  
  if(argc==2)
    desc=open(argv[1],O_RDONLY);
  
  if(desc == -1)
    while(1) 
      compter++;
  else {
    while((nb=read(desc,lect,2)) == 2)
      compter++;
    close(desc);
  }
  exit(compter);
}
